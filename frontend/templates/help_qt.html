{% extends "help.html" %}

{% block help %}

<h2> Qt-отладчик (генерируется uRPC) </h2>
<i>Требует: сгенерированной <a href="/helplibrary">библиотеки</a></i>
<h3>Описание</h3>
<p>По описанию протокола генератор способен создать программу-дебаггер с графическим интерфейсом. Эта программа
    позволяет взаимодействовать (отправлять команды, смотреть результат) с реальным и виртуальным устройством,
    работающим по данному протоколу.
    В сгенерированном архиве лежат исходные коды этой программы и проект для сборки
</p>

<h3>Инструкция по сборке qt-отладчика</h3>
<h3>Сборка под Windows</h3>
<ul>
    <li>Установить Qt 4.8.x</li>
    <li>По аналогии со сборкой <a href="/helplibrary">библиотеки</a> открыть CMake GUI, выбрать папку с проектом</li>
    <li>Попробовать сконфигурировать проект. Если CMake не может найти Qt, в CMake переменной QT_QMAKE_EXECUTABLE
        вручную укажите путь до вашего сборщика qmake
        (он должен быть в папке с установленным Qt)
    </li>
    <li>Сгенерировать проект по аналогии со сборкой <a href="/helplibrary">библиотеки</a></li>
    <li>Открыть в Visual Studio сгенерированный CMake-ом файл uRPC_debugger.vcxproj</li>
    <li>Кинуть в каталог проекта файлы &lt;имя проекта&gt;.dll, &lt;имя проекта&gt;.lib, &lt;имя проекта&gt;.h от предварительно
        скомпилированной библиотеки</li>
    <li>Скомпилировать, запустить собранный файл</li>
</ul>
<h3>Сборка под Linux</h3>
<ol>
    <li>Установить всё необходимое: qt4, cmake, make:
    <p><font face = "Terminal">sudo apt-get install libqt4-dev build-essential cmake</font></p>
    </li>
    <li>В директории с распакованным архивом qt-отладчика запустить cmake:
    <p><font face = "Terminal">
        cmake CMakeLists.txt
        </font>
    </p>
    <li>Не забудьте поместить заголовочный файл <имя библиотеки>.h и файл библиотеки <имя библиотеки>.so от
    предварительно собранной библиотеки в каталог с распакованным архивом qt-отладчика</li>
    <li>Запустить make:
    <p><font face = "Terminal">
        make
    </font>
    </p>

    <li>Дождаться окончания сборки</li>
    <li>Запустить программу, предварительно добавив в переменную окружения путь к библиотеке:
    <p>
        <font face = "Terminal">
        export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:`pwd`<p></p>
        ./uRPC_debugger
        </font>
    </p>
    Заметьте, для работы с реальным устройством могут потребоваться права root. </li>
</ol>

<h3>Запуск и работа с программой</h3>
<ul>
    <li>Для работы программы требуется &lt;имя проекта&gt;.dll и dll-ки от Qt (если Qt прописана в системные пути, то
        Qt-шные библиотеки должны найтись сами). <br />
        Под linux потребуются библиотеки .so. Путь к библиотеке должен быть прописан в переменной окружения
        LD_LIBRARY_PATH (см. выше "Сборка под linux"). В некоторых версиях linux после копирования библиотеки
        нужно вызвать команду
    <p><font face = "Terminal">sudo ldconfig</font></p>
        для обновления кэша библиотек
    </li>
    <p></p>
    <li>Сначала нужно открыть порт. Для Windows имя порта образуется по шаблону:</li>

    <p><i>com:\\.\COMxx</i></p>
</ul>
<ul>
    Например, если нужен 19-й порт, написать:

    <i><p>com:\\.\<span class="caps">COM19</span></p></i>
 </ul>
<ul>
    Для Linux:

    <i><p>com:///dev/ttyACM19</p></i>
</ul>
<ul>
    <li>Можно работать</li>
</ul>

{% end %}
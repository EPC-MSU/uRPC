В этом архиве лежит прошивка для контроллера NIIET K1921BK01T, реализующая протокол uRPC с интерфейсом UART.
В прошивке используется UART3 на порту GPIOF, пины 12 и 13.

Инструкция по первому запуску прошивки.

1. Установить программу IAR Embedded Workbench for ARM версии 7.30.3

2. Распаковать содержимое архива iar-K1921BK01T-env.7z (лежит внутри скаченного архива) в каталог, где установлен IAR (для выполнения операции требуются права администратора). Архив содержит файлы:

        arm/src/flashloadert/NIIET - исходники загрузчика флеш,
        arm/inc/NIIET - заголовочные файлы для K1921BK01T,
        arm/examples/NIIET - примеры программ,
        arm/config/linker/NIIET - настройки линкера,
        arm/config/flashloader/NIIET - скомпилированный загрузчик с настройками,
        arm/config/devices/NIIET - собственно само описание МК для IAR,
        arm/config/debugger/NIIET - описание периферии МК для отладки.

3. В каталог с проектами (рекомендуется использовать путь - C:\projects\) скопировать проект библиотеки периферии для K1921BK01T. Архив можно скачать по ссылке: https://download.urpc.kea.su/firmware/niiet/k1921bk01t/niietcm4_pd.zip

4. В каталог с проектами (важно использовать тот же каталог с проектами, правильная работа завязана на относительные пути) скопировать проект USB библиотеки для K1921BK01T. Архив можно скачать по ссылке: https://download.urpc.kea.su/firmware/niiet/k1921bk01t/niietcm4_usb.zip

5. В каталог с проектами (важно использовать тот же каталог с проектами, правильная работа завязана на относительные пути) склонировать проект программы (содержимое скаченного архива)

6. Открыть в IAR проект программы firmware. В свойствах проекта (Alt + F7):

        в поле Debugger->Setup->Driver выбрать соответствующий программатор,
        на вкладке Debugger->Download отметить галочки Verify download и Use flash loader, остальные снять

7. Перейти в проект библиотеки периферии driverlib и скомпилировать библиотеку F7.

8. Перейти в проект USB библиотеки usblib и скомпилировать библиотеку F7.

9. Основные настройки закончены, можно вернуться в проект программы firmware, скомпилировать код программы F7 и залить программу в микроконтроллер Project->Download->Download active application.

10. После запуска отладчика может выдаваться предупреждение о "неизвестном" ядре. Надо согласиться на ручной выбор и выбрать из предложенных ядер ядро Cortex-M4.
